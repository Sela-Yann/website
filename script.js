// Language translations
const translations = {
  en: {
    name: "Portfolio",
    "nav-home": "Home",
    "nav-about": "About",
    "nav-projects": "Projects",
    "nav-skills": "Skills",
    "nav-contact": "Contact",
    "hero-title": "Yann Sela Developer",
    "hero-subtitle": "Full Stack Developer",
    "hero-description":
      "Building modern web applications with passion and precision. Specialized in creating seamless user experiences and robust backend systems.",
    "hero-cta": "Get In Touch",
    "about-title": "About Me",
    "about-p1":
      "Hello! I'm a passionate full-stack developer with over 2 years of experience in building web applications. I specialize in modern JavaScript frameworks and creating scalable solutions.",
    "about-p2":
      "I love turning complex problems into simple, beautiful, and intuitive designs. When I'm not coding, you'll find me exploring new technologies, contributing to open-source projects, or sharing my knowledge through blog posts and tutorials.",
    "about-p3":
      "My goal is to build products that provide pixel-perfect, performant experiences and make a positive impact on users' lives.",
    "projects-title": "Featured Projects",
    "project1-title": "Flappy Bird",
    "project1-desc":
      "The game is a side-scroller where the player controls a bird, Faby, attempting to fly between columns of green pipes without hitting them.",
    "project2-title": "Task Management App",
    "project2-desc":
      "Collaborative project management tool with real-time updates, team collaboration features, and analytics dashboard.",
    "project3-title": "Social Network",
    "project3-desc":
      "A social networking platform with user profiles, posts, comments, and real-time messaging capabilities.",
    "skills-title": "Skills & Technologies",
    "skills-frontend": "Frontend Development",
    "skills-backend": "Backend Development",
    "skills-database": "Database & Tools",
    "contact-title": "Get In Touch",
    "contact-info-title": "Contact Information",
    "info-email-label": "Email",
    "info-phone-label": "Phone",
    "info-location-label": "Location",
    "info-location-value": "Phnom Penh, Cambodia",
    "info-availability-label": "Availability",
    "info-availability-value": "Available for freelance work",
    "social-title": "Follow Me",
    "form-name": "Name",
    "form-email": "Email",
    "form-message": "Message",
    "form-submit": "Send Message",
    "info-item": "Phnom Penh, KH",
    "footer-text": "Â© 2025 Kon Khmer Developer. All rights reserved.",
  },
  km: {
    name: "Portfolio",
    "nav-home": "áž‘áŸ†áž–áŸážšážŠáž¾áž˜",
    "nav-about": "áž¢áŸ†áž–áž¸ážáŸ’áž‰áž»áŸ†",
    "nav-projects": "áž‚áž˜áŸ’ážšáŸ„áž„",
    "nav-skills": "áž‡áŸ†áž“áž¶áž‰",
    "nav-contact": "áž‘áŸ†áž“áž¶áž€áŸ‹áž‘áŸ†áž“áž„",
    "hero-title": "áž€áž¼áž“ážáŸ’áž˜áŸ‚ážš Developer",
    "hero-subtitle": "Full Stack Developer",
    "hero-description": "áž”áž„áŸ’áž€áž¾ážáž€áž˜áŸ’áž˜ážœáž·áž’áž¸áž‚áŸáž áž‘áŸ†áž–áŸážšáž‘áŸ†áž“áž¾áž”ážŠáŸ„áž™áž‘áŸ†áž“áž»áž€áž…áž·ážáŸ’áž áž“áž·áž„áž—áž¶áž–áž‡áž¶áž€áŸ‹áž›áž¶áž€áŸ‹áŸ” áž¯áž€áž‘áŸážŸáž€áŸ’áž“áž»áž„áž€áž¶ážšáž”áž„áŸ’áž€áž¾ážáž“áž·áž„áž˜áž¶áž“áž”áž‘áž–áž·ážŸáŸ„áž’áž“áŸáž¢áŸ’áž“áž€áž”áŸ’ážšáž¾áž”áŸ’ážšáž¶ážŸáŸ‹áž‚áŸ’áž˜áž¶áž“ážŠáŸ‚áž“áž€áŸ†ážŽážáŸ‹ áŸ”",
    "hero-cta": "áž‘áž¶áž€áŸ‹áž‘áž„áž˜áž€ážáŸ’áž‰áž»áŸ†",
    "about-title": "áž¢áŸ†áž–áž¸ážáŸ’áž‰áž»áŸ†",
    "about-p1":
      "ážŸáž½ážŸáŸ’ážáž¸! ážáŸ’áž‰áž»áŸ†áž‡áž¶ Full Stack Developer áž‡áž¶áž˜áž½áž™áž”áž‘áž–áž·ážŸáŸ„áž’áž“áŸáž‡áž¶áž„ áŸ¢ áž†áŸ’áž“áž¶áŸ†áž€áŸ’áž“áž»áž„áž€áž¶ážšáž”áž„áŸ’áž€áž¾ážáž€áž˜áŸ’áž˜ážœáž·áž’áž¸áž‚áŸáž áž‘áŸ†áž–áŸážšáŸ” ážáŸ’áž‰áž»áŸ†áž¯áž€áž‘áŸážŸáž€áŸ’áž“áž»áž„ JavaScript áž“áž·áž„áž€áž¶ážšáž”áž„áŸ’áž€áž¾ážážŠáŸ†ážŽáŸ„áŸ‡ážŸáŸ’ážšáž¶áž™ážŠáŸ‚áž›áž¢áž¶áž…áž–áž„áŸ’ážšáž¸áž€áž”áž¶áž“áŸ”",
    "about-p2":
      "ážáŸ’áž‰áž»áŸ†áž…áž¼áž›áž…áž·ážáŸ’ážáž”áŸ’ážšáŸ‚áž€áŸ’áž›áž¶áž™áž”áž‰áŸ’áž áž¶ážŸáŸ’áž˜áž»áž‚ážŸáŸ’áž˜áž¶áž‰áž‘áŸ…áž‡áž¶áž€áž¶ážšážšáž…áž“áž¶ážŸáž¶áž˜áž‰áŸ’áž‰ ážŸáŸ’áž¢áž¶áž áž“áž·áž„áž…áž›áž“áž¶áž—áž¶áž–áŸ” áž“áŸ…áž–áŸáž›áž¢áŸ’áž“áž€ážŸážšážŸáŸážšáž€áž¼ážŠ áž¢áŸ’áž“áž€áž“áž¹áž„ážšáž€ážƒáž¾áž‰ážáŸ’áž‰áž»áŸ†áž€áŸ†áž–áž»áž„ážŸáŸ’ážœáŸ‚áž„ážšáž€áž”áž…áŸ’áž…áŸáž€ážœáž·áž‘áŸ’áž™áž¶ážáŸ’áž˜áž¸ áž…áž¼áž›ážšáž½áž˜áž…áŸ†ážŽáŸ‚áž€ážŠáž›áŸ‹áž‚áž˜áŸ’ážšáŸ„áž„áž”áŸ’ážšáž—áž–áž”áž¾áž€áž…áŸ†áž  áž¬áž…áŸ‚áž€ážšáŸ†áž›áŸ‚áž€áž…áŸ†ážŽáŸáŸ‡ážŠáž¹áž„ážšáž”ážŸáŸ‹ážáŸ’áž‰áž»áŸ†ážáž¶áž˜ážšáž™áŸˆáž€áž¶ážšáž”áž„áŸ’áž áž¶áž‰ áž“áž·áž„áž€áž¶ážšáž”áž„áŸ’ážšáŸ€áž“áŸ”",
    "about-p3": "áž‚áŸ„áž›ážŠáŸ…ážšáž”ážŸáŸ‹ážáŸ’áž‰áž»áŸ†áž‚ážºáž”áž„áŸ’áž€áž¾ážáž‚áŸáž áž‘áŸ†áž–áŸážšážŠáŸ‚áž›áž˜áž¶áž“áž”áŸ’ážšážŸáž·áž‘áŸ’áž’áž—áž¶áž– áž“áž·áž„áž’áŸ’ážœáž¾áž±áŸ’áž™áž˜áž¶áž“áž•áž›áž›áŸ’áž¢ážŠáž›áŸ‹áž‡áž¸ážœáž·ážáž¢áŸ’áž“áž€áž”áŸ’ážšáž¾áž”áŸ’ážšáž¶ážŸáŸ‹áŸ”",
    "projects-title": "áž‚áž˜áŸ’ážšáŸ„áž„ážšáž”ážŸáŸ‹ážáŸ’áž‰áž»áŸ†",
    "project1-title": "Flappy Bird",
    "project1-desc": "The game is a side-scroller where the player controls a bird, Faby, attempting to fly between columns of green pipes without hitting them.",
    "project2-title": "áž€áž˜áŸ’áž˜ážœáž·áž’áž¸áž‚áŸ’ážšáž”áŸ‹áž‚áŸ’ážšáž„áž—áž¶ážšáž€áž·áž…áŸ’áž…",
    "project2-desc": "áž§áž”áž€ážšážŽáŸáž‚áŸ’ážšáž”áŸ‹áž‚áŸ’ážšáž„áž‚áž˜áŸ’ážšáŸ„áž„ážŸáž áž€áž¶ážšáž‡áž¶áž˜áž½áž™áž€áž¶ážšáž’áŸ’ážœáž¾áž”áž…áŸ’áž…áž»áž”áŸ’áž”áž“áŸ’áž“áž—áž¶áž–áž–áŸáž›ážœáŸáž›áž¶ áž“áž·áž„áž•áŸ’áž‘áž¶áŸ†áž„áž–áŸážáŸŒáž˜áž¶áž“ážœáž·áž—áž¶áž‚áŸ”",
    "project3-title": "áž”ážŽáŸ’ážáž¶áž‰ážŸáž„áŸ’áž‚áž˜",
    "project3-desc": "ážœáŸáž‘áž·áž€áž¶áž”ážŽáŸ’ážáž¶áž‰ážŸáž„áŸ’áž‚áž˜áž‡áž¶áž˜áž½áž™áž”áŸ’ážšážœážáŸ’ážáž·ážšáž¼áž”áž¢áŸ’áž“áž€áž”áŸ’ážšáž¾áž”áŸ’ážšáž¶ážŸáŸ‹ áž€áž¶ážšáž”áž„áŸ’áž áŸ„áŸ‡ áž“áž·áž„ážŸáž˜ážáŸ’ážáž—áž¶áž–áž•áŸ’áž‰áž¾ážŸáž¶ážšáŸ”",
    "skills-title": "áž‡áŸ†áž“áž¶áž‰ áž“áž·áž„áž”áž…áŸ’áž…áŸáž€ážœáž·áž‘áŸ’áž™áž¶",
    "skills-frontend": "áž€áž¶ážšáž¢áž—áž·ážœážŒáŸ’ážáž“áŸáž•áŸ’áž“áŸ‚áž€ážáž¶áž„áž˜áž»áž",
    "skills-backend": "áž€áž¶ážšáž¢áž—áž·ážœážŒáŸ’ážáž“áŸáž•áŸ’áž“áŸ‚áž€ážáž¶áž„áž€áŸ’ážšáŸ„áž™",
    "skills-database": "áž˜áž¼áž›ážŠáŸ’áž‹áž¶áž“áž‘áž·áž“áŸ’áž“áž“áŸáž™ áž“áž·áž„áž§áž”áž€ážšážŽáŸ",
    "contact-title": "áž‘áž¶áž€áŸ‹áž‘áž„áž˜áž€ážáŸ’áž‰áž»áŸ†",
    "contact-info-title": "áž–áŸážáŸŒáž˜áž¶áž“áž›áž˜áŸ’áž¢áž·áž",
    "info-email-label": "áž¢áŸŠáž¸áž˜áŸ‚áž›",
    "info-phone-label": "áž‘áž¼ážšážŸáŸáž–áŸ’áž‘",
    "info-location-label": "áž‘áž¸ážáž¶áŸ†áž„",
    "info-location-value": "áž—áŸ’áž“áŸ†áž–áŸáž‰áž€áž˜áŸ’áž–áž»áž‡áž¶",
    "info-availability-label": "áž¢áž¶áž…ážšáž€ážáŸ’áž‰áž»áŸ†áž”áž¶áž“",
    "info-availability-value": "áž’áŸ’ážœáž¾áž€áž¶ážšážŠáŸ„áž™áž¯áž€ážšáž¶áž‡áŸ’áž™",
    "social-title": "áž‘áŸ†áž“áž¶áž€áŸ‹áž‘áŸ†áž“áž„áž˜áž€ážáŸ’áž‰áž»áŸ†",
    "form-name": "ážˆáŸ’áž˜áŸ„áŸ‡",
    "form-email": "áž¢áŸŠáž¸áž˜áŸ‚áž›",
    "form-message": "ážŸáž¶ážš",
    "form-submit": "áž•áŸ’áž‰áž¾ážŸáž¶ážš",
    "footer-text": "Â© 2025 áž€áž¼áž“ážáŸ’áž˜áŸ‚ážš Developer. ážšáž€áŸ’ážŸáž¶ážŸáž·áž‘áŸ’áž’áž·áž‚áŸ’ážšáž”áŸ‹áž™áŸ‰áž¶áž„áŸ”",
  },
};

let currentLanguage = localStorage.getItem("language") || "en";

// Theme toggle
const themeToggle = document.getElementById("themeToggle");
const body = document.body;
const savedTheme = localStorage.getItem("theme") || "light";

if (savedTheme === "dark") {
  body.classList.add("dark-mode");
  themeToggle.textContent = "â˜€ï¸";
}

themeToggle.addEventListener("click", () => {
  body.classList.toggle("dark-mode");
  const isDarkMode = body.classList.contains("dark-mode");
  localStorage.setItem("theme", isDarkMode ? "dark" : "light");
  themeToggle.textContent = isDarkMode ? "â˜€ï¸" : "ðŸŒ™";
});

// Language toggle
const langBtn = document.getElementById("langBtn");

function updateLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem("language", lang);
  document.querySelectorAll("[data-lang]").forEach((element) => {
    const key = element.getAttribute("data-lang");
    if (translations[lang] && translations[lang][key]) {
      element.textContent = translations[lang][key];
    }
  });
  langBtn.textContent = lang === "en" ? "KH" : "EN";
}

langBtn.addEventListener("click", () => {
  const newLang = currentLanguage === "en" ? "km" : "en";
  updateLanguage(newLang);
});

// Initialize language on page load
updateLanguage(currentLanguage);

// Intersection Observer for scroll animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: "0px 0px -50px 0px",
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      entry.target.classList.add("visible");
    }
  });
}, observerOptions);

document
  .querySelectorAll(".fade-in, .slide-in-left, .slide-in-right, .scale-in")
  .forEach((el) => {
    observer.observe(el);
  });

// Mobile menu toggle
const menuToggle = document.querySelector(".menu-toggle");
const navLinks = document.querySelector(".nav-links");

if (!menuToggle) {
  const hamburger = document.createElement("button");
  hamburger.className = "menu-toggle";
  hamburger.innerHTML = "<span></span><span></span><span></span>";
  document.querySelector(".nav-container").insertBefore(hamburger, navLinks);
  hamburger.addEventListener("click", () => {
    hamburger.classList.toggle("active");
    navLinks.classList.toggle("active");
  });
}

// Close menu when a link is clicked
document.querySelectorAll(".nav-links a").forEach((link) => {
  link.addEventListener("click", () => {
    const toggle = document.querySelector(".menu-toggle");
    if (toggle) {
      toggle.classList.remove("active");
      navLinks.classList.remove("active");
    }
  });
});

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
  anchor.addEventListener("click", function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute("href"));
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
  });
});

// Navbar shadow on scroll
const navbar = document.getElementById("navbar");
window.addEventListener("scroll", () => {
  if (window.scrollY > 50) {
    navbar.classList.add("scrolled");
  } else {
    navbar.classList.remove("scrolled");
  }
});

// Form submission
function handleSubmit(event) {
  event.preventDefault();
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const message = document.getElementById("message").value;

  if (name && email && message) {
    const mailtoLink = `mailto:yannsela88@gmail.com?subject=Contact from ${encodeURIComponent(
      name
    )}&body=${encodeURIComponent(
      `Name: ${name}\nEmail: ${email}\n\nMessage:\n${message}`
    )}`;
    window.location.href = mailtoLink;
    document.querySelector(".contact-form").reset();
  }
}
